/*******************************************************************************
*   ___   public
*  ¦OUX¦  C
*  ¦/C+¦  OUX/C+ OS
*   ---   kernel
*         interrupt handlers
* ©overcq                on ‟Gentoo Linux 23.0” “x86_64”              2025‒6‒4 K
*******************************************************************************/
_private void E_interrupt_I_exeception_de(void);
_private void E_interrupt_I_exeception_db(void);
_private void E_interrupt_I_exeception_nmi(void);
_private void E_interrupt_I_exeception_bp(void);
_private void E_interrupt_I_exeception_of(void);
_private void E_interrupt_I_exeception_br(void);
_private void E_interrupt_I_exeception_ud(void);
_private void E_interrupt_I_exeception_nm(void);
_private void E_interrupt_I_exeception_df(void);
_private void E_interrupt_I_exeception_mf(void);
_private void E_interrupt_I_exeception_ts(void);
_private void E_interrupt_I_exeception_np(void);
_private void E_interrupt_I_exeception_ss(void);
_private void E_interrupt_I_exeception_gp(void);
_private void E_interrupt_I_exeception_pf(void);
_private void E_interrupt_I_exeception_mf(void);
_private void E_interrupt_I_exeception_ac(void);
_private void E_interrupt_I_exeception_mc(void);
_private void E_interrupt_I_exeception_xm(void);
_private void E_interrupt_I_exeception_ve(void);
_private void E_interrupt_I_exeception_cp(void);
_private void E_interrupt_I_external_32(void);
_private void E_interrupt_I_external_33(void);
_private void E_interrupt_I_external_34(void);
_private void E_interrupt_I_external_35(void);
_private void E_interrupt_I_external_36(void);
_private void E_interrupt_I_external_37(void);
_private void E_interrupt_I_external_38(void);
_private void E_interrupt_I_external_39(void);
_private void E_interrupt_I_external_40(void);
_private void E_interrupt_I_external_41(void);
_private void E_interrupt_I_external_42(void);
_private void E_interrupt_I_external_43(void);
_private void E_interrupt_I_external_44(void);
_private void E_interrupt_I_external_45(void);
_private void E_interrupt_I_external_46(void);
_private void E_interrupt_I_external_47(void);
_private void E_interrupt_I_external_48(void);
_private void E_interrupt_I_external_49(void);
_private void E_interrupt_I_external_50(void);
_private void E_interrupt_I_external_51(void);
_private void E_interrupt_I_external_52(void);
_private void E_interrupt_I_external_53(void);
_private void E_interrupt_I_external_54(void);
_private void E_interrupt_I_external_55(void);
_private void E_interrupt_I_external_56(void);
_private void E_interrupt_I_external_57(void);
_private void E_interrupt_I_external_58(void);
_private void E_interrupt_I_external_59(void);
_private void E_interrupt_I_external_60(void);
_private void E_interrupt_I_external_61(void);
_private void E_interrupt_I_external_62(void);
_private void E_interrupt_I_external_63(void);
_private void E_interrupt_I_external_64(void);
_private void E_interrupt_I_external_65(void);
_private void E_interrupt_I_external_66(void);
_private void E_interrupt_I_external_67(void);
_private void E_interrupt_I_external_68(void);
_private void E_interrupt_I_external_69(void);
_private void E_interrupt_I_external_70(void);
_private void E_interrupt_I_external_71(void);
_private void E_interrupt_I_external_72(void);
_private void E_interrupt_I_external_73(void);
_private void E_interrupt_I_external_74(void);
_private void E_interrupt_I_external_75(void);
_private void E_interrupt_I_external_76(void);
_private void E_interrupt_I_external_77(void);
_private void E_interrupt_I_external_78(void);
_private void E_interrupt_I_external_79(void);
_private void E_interrupt_I_external_80(void);
_private void E_interrupt_I_external_81(void);
_private void E_interrupt_I_external_82(void);
_private void E_interrupt_I_external_83(void);
_private void E_interrupt_I_external_84(void);
_private void E_interrupt_I_external_85(void);
_private void E_interrupt_I_external_86(void);
_private void E_interrupt_I_external_87(void);
_private void E_interrupt_I_external_88(void);
_private void E_interrupt_I_external_89(void);
_private void E_interrupt_I_external_90(void);
_private void E_interrupt_I_external_91(void);
_private void E_interrupt_I_external_92(void);
_private void E_interrupt_I_external_93(void);
_private void E_interrupt_I_external_94(void);
_private void E_interrupt_I_external_95(void);
_private void E_interrupt_I_external_96(void);
_private void E_interrupt_I_external_97(void);
_private void E_interrupt_I_external_98(void);
_private void E_interrupt_I_external_99(void);
_private void E_interrupt_I_external_100(void);
_private void E_interrupt_I_external_101(void);
_private void E_interrupt_I_external_102(void);
_private void E_interrupt_I_external_103(void);
_private void E_interrupt_I_external_104(void);
_private void E_interrupt_I_external_105(void);
_private void E_interrupt_I_external_106(void);
_private void E_interrupt_I_external_107(void);
_private void E_interrupt_I_external_108(void);
_private void E_interrupt_I_external_109(void);
_private void E_interrupt_I_external_110(void);
_private void E_interrupt_I_external_111(void);
_private void E_interrupt_I_external_112(void);
_private void E_interrupt_I_external_113(void);
_private void E_interrupt_I_external_114(void);
_private void E_interrupt_I_external_115(void);
_private void E_interrupt_I_external_116(void);
_private void E_interrupt_I_external_117(void);
_private void E_interrupt_I_external_118(void);
_private void E_interrupt_I_external_119(void);
_private void E_interrupt_I_external_120(void);
_private void E_interrupt_I_external_121(void);
_private void E_interrupt_I_external_122(void);
_private void E_interrupt_I_external_123(void);
_private void E_interrupt_I_external_124(void);
_private void E_interrupt_I_external_125(void);
_private void E_interrupt_I_external_126(void);
_private void E_interrupt_I_external_127(void);
_private void E_interrupt_I_external_128(void);
_private void E_interrupt_I_external_129(void);
_private void E_interrupt_I_external_130(void);
_private void E_interrupt_I_external_131(void);
_private void E_interrupt_I_external_132(void);
_private void E_interrupt_I_external_133(void);
_private void E_interrupt_I_external_134(void);
_private void E_interrupt_I_external_135(void);
_private void E_interrupt_I_external_136(void);
_private void E_interrupt_I_external_137(void);
_private void E_interrupt_I_external_138(void);
_private void E_interrupt_I_external_139(void);
_private void E_interrupt_I_external_140(void);
_private void E_interrupt_I_external_141(void);
_private void E_interrupt_I_external_142(void);
_private void E_interrupt_I_external_143(void);
_private void E_interrupt_I_external_144(void);
_private void E_interrupt_I_external_145(void);
_private void E_interrupt_I_external_146(void);
_private void E_interrupt_I_external_147(void);
_private void E_interrupt_I_external_148(void);
_private void E_interrupt_I_external_149(void);
_private void E_interrupt_I_external_150(void);
_private void E_interrupt_I_external_151(void);
_private void E_interrupt_I_external_152(void);
_private void E_interrupt_I_external_153(void);
_private void E_interrupt_I_external_154(void);
_private void E_interrupt_I_external_155(void);
_private void E_interrupt_I_external_156(void);
_private void E_interrupt_I_external_157(void);
_private void E_interrupt_I_external_158(void);
_private void E_interrupt_I_external_159(void);
_private void E_interrupt_I_external_160(void);
_private void E_interrupt_I_external_161(void);
_private void E_interrupt_I_external_162(void);
_private void E_interrupt_I_external_163(void);
_private void E_interrupt_I_external_164(void);
_private void E_interrupt_I_external_165(void);
_private void E_interrupt_I_external_166(void);
_private void E_interrupt_I_external_167(void);
_private void E_interrupt_I_external_168(void);
_private void E_interrupt_I_external_169(void);
_private void E_interrupt_I_external_170(void);
_private void E_interrupt_I_external_171(void);
_private void E_interrupt_I_external_172(void);
_private void E_interrupt_I_external_173(void);
_private void E_interrupt_I_external_174(void);
_private void E_interrupt_I_external_175(void);
_private void E_interrupt_I_external_176(void);
_private void E_interrupt_I_external_177(void);
_private void E_interrupt_I_external_178(void);
_private void E_interrupt_I_external_179(void);
_private void E_interrupt_I_external_180(void);
_private void E_interrupt_I_external_181(void);
_private void E_interrupt_I_external_182(void);
_private void E_interrupt_I_external_183(void);
_private void E_interrupt_I_external_184(void);
_private void E_interrupt_I_external_185(void);
_private void E_interrupt_I_external_186(void);
_private void E_interrupt_I_external_187(void);
_private void E_interrupt_I_external_188(void);
_private void E_interrupt_I_external_189(void);
_private void E_interrupt_I_external_190(void);
_private void E_interrupt_I_external_191(void);
_private void E_interrupt_I_external_192(void);
_private void E_interrupt_I_external_193(void);
_private void E_interrupt_I_external_194(void);
_private void E_interrupt_I_external_195(void);
_private void E_interrupt_I_external_196(void);
_private void E_interrupt_I_external_197(void);
_private void E_interrupt_I_external_198(void);
_private void E_interrupt_I_external_199(void);
_private void E_interrupt_I_external_200(void);
_private void E_interrupt_I_external_201(void);
_private void E_interrupt_I_external_202(void);
_private void E_interrupt_I_external_203(void);
_private void E_interrupt_I_external_204(void);
_private void E_interrupt_I_external_205(void);
_private void E_interrupt_I_external_206(void);
_private void E_interrupt_I_external_207(void);
_private void E_interrupt_I_external_208(void);
_private void E_interrupt_I_external_209(void);
_private void E_interrupt_I_external_210(void);
_private void E_interrupt_I_external_211(void);
_private void E_interrupt_I_external_212(void);
_private void E_interrupt_I_external_213(void);
_private void E_interrupt_I_external_214(void);
_private void E_interrupt_I_external_215(void);
_private void E_interrupt_I_external_216(void);
_private void E_interrupt_I_external_217(void);
_private void E_interrupt_I_external_218(void);
_private void E_interrupt_I_external_219(void);
_private void E_interrupt_I_external_220(void);
_private void E_interrupt_I_external_221(void);
_private void E_interrupt_I_external_222(void);
_private void E_interrupt_I_external_223(void);
_private void E_interrupt_I_external_224(void);
_private void E_interrupt_I_external_225(void);
_private void E_interrupt_I_external_226(void);
_private void E_interrupt_I_external_227(void);
_private void E_interrupt_I_external_228(void);
_private void E_interrupt_I_external_229(void);
_private void E_interrupt_I_external_230(void);
_private void E_interrupt_I_external_231(void);
_private void E_interrupt_I_external_232(void);
_private void E_interrupt_I_external_233(void);
_private void E_interrupt_I_external_234(void);
_private void E_interrupt_I_external_235(void);
_private void E_interrupt_I_external_236(void);
_private void E_interrupt_I_external_237(void);
_private void E_interrupt_I_external_238(void);
_private void E_interrupt_I_external_239(void);
_private void E_interrupt_I_external_240(void);
_private void E_interrupt_I_external_241(void);
_private void E_interrupt_I_external_242(void);
_private void E_interrupt_I_external_243(void);
_private void E_interrupt_I_external_244(void);
_private void E_interrupt_I_external_245(void);
_private void E_interrupt_I_external_246(void);
_private void E_interrupt_I_external_247(void);
_private void E_interrupt_I_external_248(void);
_private void E_interrupt_I_external_249(void);
_private void E_interrupt_I_external_250(void);
_private void E_interrupt_I_external_251(void);
_private void E_interrupt_I_external_252(void);
_private void E_interrupt_I_external_253(void);
_private void E_interrupt_I_external_254(void);
_private void E_interrupt_I_external_spurious(void);
//==============================================================================
_private volatile P E_interrupt_Q_local_apic_S_address;
_private volatile P E_interrupt_Q_io_apic_S_address;
_private
struct E_interrupt_Z_gsi
{ N8 source;
  N8 flags;
} *E_interrupt_S_gsi;
_private N8 E_interrupt_S_gsi_n;
_internal N *E_interrupt_S_idt;
_private E_interrupt_S_external_Z *E_interrupt_S_external;
_internal N8 E_interrupt_S_timer_gsi;
//==============================================================================
_internal
N32
E_interrupt_Q_io_apic_R( N8 i
){  *( volatile N32 * )E_interrupt_Q_io_apic_S_address = i;
    return *( volatile N32 * )( (Pc)E_interrupt_Q_io_apic_S_address + 0x10 );
}
_internal
void
E_interrupt_Q_io_apic_P( N8 i
, N32 v
){  *( volatile N32 * )E_interrupt_Q_io_apic_S_address = i;
    *( volatile N32 * )( (Pc)E_interrupt_Q_io_apic_S_address + 0x10 ) = v;
}
_internal
void
E_interrupt_Q_io_apic_P_gsi( N8 i
, N64 v
){  E_interrupt_Q_io_apic_P( 0x10 + i * 2, v & 0xffffffff );
    E_interrupt_Q_io_apic_P( 0x10 + i * 2 + 1, v >> 32 );
}
//------------------------------------------------------------------------------
_internal
N32
E_interrupt_Q_local_apic_R( N i
){  return *( volatile N32 * )( E_interrupt_Q_local_apic_S_address + i * 0x10 );
}
_private
void
E_interrupt_Q_local_apic_P( N i
, N32 v
){  *( volatile N32 * )( E_interrupt_Q_local_apic_S_address + i * 0x10 ) = v;
}
//------------------------------------------------------------------------------
_internal
void
E_interrupt_I_ipi( N processor
, N8 i
){  E_interrupt_Q_local_apic_P( 0x31, ( processor & 0xff ) << 24 );
    E_interrupt_Q_local_apic_P( 0x30, i );
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#define E_interrupt_Q_io_apic_J_gsi_v( vector, delivery_mode, polarity, trigger_mode, mask, destination ) \
    ( (vector) | ( (N)( delivery_mode ) << 8 ) | ( (N)(polarity) << 13 ) | ( (N)( trigger_mode ) << 15 ) | ( (N)(mask) << 16 ) | ( (N)(destination) << 56 ))
_private
void
E_interrupt_Q_io_apic_I_enable( N8 i
){  N polarity = ( E_interrupt_S_gsi[i].flags & 3 ) == 1 ? 0 : 1;
    N trigger_mode = (( E_interrupt_S_gsi[i].flags >> 2 ) & 3 ) == 3 ? 1 : 0;
    E_interrupt_Q_io_apic_P_gsi( i, E_interrupt_Q_io_apic_J_gsi_v( 32 + i, 0, polarity, trigger_mode, 0, 0 ));
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
_private
void
E_interrupt_P( N8 irq
, E_interrupt_S_external_Z proc
){  for_n( i, E_interrupt_S_gsi_n )
        if( E_interrupt_S_gsi[i].source == irq )
        {   E_interrupt_S_external[i] = proc;
            break;
        }
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
_internal
void
E_scheduler_I_clock_interrupt( void
){  E_font_I_print( "\nclock interrupt" );
}
#define E_interrupt_J_interrupt_descriptor_low( selector, offset ) (( (N)(offset) & (( 1UL << 16 ) - 1 )) | ( (N)(selector) << 16 ) | ( 0xeUL << ( 32 + 8 )) | ( 1UL << ( 32 + 15 )) | ((( (N)(offset) >> 16 ) & (( 1UL << 16 ) - 1 )) << ( 32 + 16 )))
#define E_interrupt_J_interrupt_descriptor( i, procedure ) \
    {   E_interrupt_S_idt[ i * 2 ] = E_interrupt_J_interrupt_descriptor_low( 1 << 3, (N)&(procedure) ); \
        E_interrupt_S_idt[ i * 2 + 1 ] = (N)&(procedure) >> 32; \
    }
_private
N
E_interrupt_M( void
){  N idt_n = 32 + E_interrupt_S_gsi_n + 1;
    Mt_( E_interrupt_S_idt, idt_n * 2 );
    if( !E_interrupt_S_idt )
        return ~0;
    E_interrupt_J_interrupt_descriptor( 0, E_interrupt_I_exeception_de );
    E_interrupt_J_interrupt_descriptor( 1, E_interrupt_I_exeception_db );
    E_interrupt_J_interrupt_descriptor( 2, E_interrupt_I_exeception_nmi );
    E_interrupt_J_interrupt_descriptor( 3, E_interrupt_I_exeception_bp );
    E_interrupt_J_interrupt_descriptor( 4, E_interrupt_I_exeception_of );
    E_interrupt_J_interrupt_descriptor( 5, E_interrupt_I_exeception_br );
    E_interrupt_J_interrupt_descriptor( 6, E_interrupt_I_exeception_ud );
    E_interrupt_J_interrupt_descriptor( 7, E_interrupt_I_exeception_nm );
    E_interrupt_J_interrupt_descriptor( 8, E_interrupt_I_exeception_df );
    E_interrupt_S_idt[ 9 * 2 ] = 0;
    E_interrupt_J_interrupt_descriptor( 10, E_interrupt_I_exeception_ts );
    E_interrupt_J_interrupt_descriptor( 11, E_interrupt_I_exeception_np );
    E_interrupt_J_interrupt_descriptor( 12, E_interrupt_I_exeception_ss );
    E_interrupt_J_interrupt_descriptor( 13, E_interrupt_I_exeception_gp );
    E_interrupt_J_interrupt_descriptor( 14, E_interrupt_I_exeception_pf );
    E_interrupt_S_idt[ 15 * 2 ] = 0;
    E_interrupt_J_interrupt_descriptor( 16, E_interrupt_I_exeception_mf );
    E_interrupt_J_interrupt_descriptor( 17, E_interrupt_I_exeception_ac );
    E_interrupt_J_interrupt_descriptor( 18, E_interrupt_I_exeception_mc );
    E_interrupt_J_interrupt_descriptor( 19, E_interrupt_I_exeception_xm );
    E_interrupt_J_interrupt_descriptor( 20, E_interrupt_I_exeception_ve );
    E_interrupt_J_interrupt_descriptor( 21, E_interrupt_I_exeception_cp );
    for( N i = 22; i != 32; i++ )
        E_interrupt_S_idt[ i * 2 ] = 0;
    Mt_( E_interrupt_S_external, E_interrupt_S_gsi_n );
    if( !E_interrupt_S_external )
    {   W( E_interrupt_S_idt );
        return ~0;
    }
    _0t_( E_interrupt_S_external, E_interrupt_S_gsi_n );
    for( N i = 32; i != 32 + E_interrupt_S_gsi_n; i++ )
        switch(i)
        { case 32:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_32 );
                break;
          case 33:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_33 );
                break;
          case 34:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_34 );
                break;
          case 35:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_35 );
                break;
          case 36:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_36 );
                break;
          case 37:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_37 );
                break;
          case 38:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_38 );
                break;
          case 39:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_39 );
                break;
          case 40:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_40 );
                break;
          case 41:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_41 );
                break;
          case 42:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_42 );
                break;
          case 43:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_43 );
                break;
          case 44:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_44 );
                break;
          case 45:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_45 );
                break;
          case 46:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_46 );
                break;
          case 47:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_47 );
                break;
          case 48:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_48 );
                break;
          case 49:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_49 );
                break;
          case 50:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_50 );
                break;
          case 51:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_51 );
                break;
          case 52:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_52 );
                break;
          case 53:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_53 );
                break;
          case 54:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_54 );
                break;
          case 55:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_55 );
                break;
          case 56:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_56 );
                break;
          case 57:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_57 );
                break;
          case 58:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_58 );
                break;
          case 59:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_59 );
                break;
          case 60:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_60 );
                break;
          case 61:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_61 );
                break;
          case 62:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_62 );
                break;
          case 63:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_63 );
                break;
          case 64:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_64 );
                break;
          case 65:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_65 );
                break;
          case 66:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_66 );
                break;
          case 67:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_67 );
                break;
          case 68:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_68 );
                break;
          case 69:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_69 );
                break;
          case 70:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_70 );
                break;
          case 71:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_71 );
                break;
          case 72:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_72 );
                break;
          case 73:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_73 );
                break;
          case 74:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_74 );
                break;
          case 75:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_75 );
                break;
          case 76:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_76 );
                break;
          case 77:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_77 );
                break;
          case 78:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_78 );
                break;
          case 79:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_79 );
                break;
          case 80:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_80 );
                break;
          case 81:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_81 );
                break;
          case 82:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_82 );
                break;
          case 83:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_83 );
                break;
          case 84:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_84 );
                break;
          case 85:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_85 );
                break;
          case 86:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_86 );
                break;
          case 87:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_87 );
                break;
          case 88:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_88 );
                break;
          case 89:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_89 );
                break;
          case 90:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_90 );
                break;
          case 91:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_91 );
                break;
          case 92:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_92 );
                break;
          case 93:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_93 );
                break;
          case 94:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_94 );
                break;
          case 95:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_95 );
                break;
          case 96:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_96 );
                break;
          case 97:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_97 );
                break;
          case 98:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_98 );
                break;
          case 99:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_99 );
                break;
          case 100:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_100 );
                break;
          case 101:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_101 );
                break;
          case 102:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_102 );
                break;
          case 103:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_103 );
                break;
          case 104:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_104 );
                break;
          case 105:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_105 );
                break;
          case 106:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_106 );
                break;
          case 107:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_107 );
                break;
          case 108:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_108 );
                break;
          case 109:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_109 );
                break;
          case 110:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_110 );
                break;
          case 111:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_111 );
                break;
          case 112:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_112 );
                break;
          case 113:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_113 );
                break;
          case 114:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_114 );
                break;
          case 115:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_115 );
                break;
          case 116:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_116 );
                break;
          case 117:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_117 );
                break;
          case 118:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_118 );
                break;
          case 119:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_119 );
                break;
          case 120:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_120 );
                break;
          case 121:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_121 );
                break;
          case 122:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_122 );
                break;
          case 123:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_123 );
                break;
          case 124:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_124 );
                break;
          case 125:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_125 );
                break;
          case 126:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_126 );
                break;
          case 127:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_127 );
                break;
          case 128:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_128 );
                break;
          case 129:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_129 );
                break;
          case 130:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_130 );
                break;
          case 131:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_131 );
                break;
          case 132:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_132 );
                break;
          case 133:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_133 );
                break;
          case 134:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_134 );
                break;
          case 135:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_135 );
                break;
          case 136:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_136 );
                break;
          case 137:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_137 );
                break;
          case 138:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_138 );
                break;
          case 139:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_139 );
                break;
          case 140:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_140 );
                break;
          case 141:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_141 );
                break;
          case 142:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_142 );
                break;
          case 143:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_143 );
                break;
          case 144:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_144 );
                break;
          case 145:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_145 );
                break;
          case 146:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_146 );
                break;
          case 147:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_147 );
                break;
          case 148:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_148 );
                break;
          case 149:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_149 );
                break;
          case 150:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_150 );
                break;
          case 151:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_151 );
                break;
          case 152:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_152 );
                break;
          case 153:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_153 );
                break;
          case 154:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_154 );
                break;
          case 155:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_155 );
                break;
          case 156:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_156 );
                break;
          case 157:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_157 );
                break;
          case 158:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_158 );
                break;
          case 159:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_159 );
                break;
          case 160:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_160 );
                break;
          case 161:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_161 );
                break;
          case 162:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_162 );
                break;
          case 163:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_163 );
                break;
          case 164:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_164 );
                break;
          case 165:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_165 );
                break;
          case 166:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_166 );
                break;
          case 167:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_167 );
                break;
          case 168:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_168 );
                break;
          case 169:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_169 );
                break;
          case 170:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_170 );
                break;
          case 171:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_171 );
                break;
          case 172:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_172 );
                break;
          case 173:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_173 );
                break;
          case 174:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_174 );
                break;
          case 175:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_175 );
                break;
          case 176:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_176 );
                break;
          case 177:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_177 );
                break;
          case 178:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_178 );
                break;
          case 179:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_179 );
                break;
          case 180:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_180 );
                break;
          case 181:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_181 );
                break;
          case 182:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_182 );
                break;
          case 183:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_183 );
                break;
          case 184:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_184 );
                break;
          case 185:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_185 );
                break;
          case 186:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_186 );
                break;
          case 187:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_187 );
                break;
          case 188:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_188 );
                break;
          case 189:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_189 );
                break;
          case 190:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_190 );
                break;
          case 191:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_191 );
                break;
          case 192:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_192 );
                break;
          case 193:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_193 );
                break;
          case 194:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_194 );
                break;
          case 195:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_195 );
                break;
          case 196:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_196 );
                break;
          case 197:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_197 );
                break;
          case 198:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_198 );
                break;
          case 199:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_199 );
                break;
          case 200:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_200 );
                break;
          case 201:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_201 );
                break;
          case 202:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_202 );
                break;
          case 203:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_203 );
                break;
          case 204:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_204 );
                break;
          case 205:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_205 );
                break;
          case 206:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_206 );
                break;
          case 207:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_207 );
                break;
          case 208:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_208 );
                break;
          case 209:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_209 );
                break;
          case 210:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_210 );
                break;
          case 211:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_211 );
                break;
          case 212:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_212 );
                break;
          case 213:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_213 );
                break;
          case 214:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_214 );
                break;
          case 215:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_215 );
                break;
          case 216:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_216 );
                break;
          case 217:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_217 );
                break;
          case 218:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_218 );
                break;
          case 219:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_219 );
                break;
          case 220:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_220 );
                break;
          case 221:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_221 );
                break;
          case 222:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_222 );
                break;
          case 223:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_223 );
                break;
          case 224:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_224 );
                break;
          case 225:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_225 );
                break;
          case 226:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_226 );
                break;
          case 227:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_227 );
                break;
          case 228:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_228 );
                break;
          case 229:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_229 );
                break;
          case 230:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_230 );
                break;
          case 231:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_231 );
                break;
          case 232:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_232 );
                break;
          case 233:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_233 );
                break;
          case 234:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_234 );
                break;
          case 235:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_235 );
                break;
          case 236:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_236 );
                break;
          case 237:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_237 );
                break;
          case 238:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_238 );
                break;
          case 239:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_239 );
                break;
          case 240:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_240 );
                break;
          case 241:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_241 );
                break;
          case 242:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_242 );
                break;
          case 243:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_243 );
                break;
          case 244:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_244 );
                break;
          case 245:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_245 );
                break;
          case 246:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_246 );
                break;
          case 247:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_247 );
                break;
          case 248:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_248 );
                break;
          case 249:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_249 );
                break;
          case 250:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_250 );
                break;
          case 251:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_251 );
                break;
          case 252:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_252 );
                break;
          case 253:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_253 );
                break;
          case 254:
                E_interrupt_J_interrupt_descriptor( i, E_interrupt_I_external_254 );
                break;
        }
    E_interrupt_J_interrupt_descriptor( 32 + E_interrupt_S_gsi_n, E_interrupt_I_external_spurious );
    struct __attribute__ ((packed))
    { N32 pad_1;
      N16 pad_2;
      N16 limit;
      N base;
    }id;
    id.base = (N)&E_interrupt_S_idt[0];
    id.limit = idt_n * 2 * sizeof( *E_interrupt_S_idt ) - 1;
    __asm__ volatile (
    "\n"    "lidt   %0"
    :
    : "p" ( &id.limit )
    );
    __asm__ volatile (
    "\n"    "sti"
    );
    for_n( i, E_interrupt_S_gsi_n )
        if( ~(S8)E_interrupt_S_gsi[i].source )
            E_interrupt_Q_io_apic_I_enable( E_interrupt_S_gsi[i].source );
    for_n_( i, E_interrupt_S_gsi_n )
        if( ~(S8)E_interrupt_S_gsi[i].source )
            E_interrupt_S_timer_gsi = i;
    if( i == E_interrupt_S_gsi_n )
        E_interrupt_S_timer_gsi = 16;

    E_interrupt_Q_local_apic_P( 0xf, ( E_interrupt_Q_local_apic_R( 0xf ) & ~0x1ff ) | 0x100 | ( idt_n - 1 ));
    E_interrupt_Q_local_apic_P( 0x32, 32 + E_interrupt_S_timer_gsi );
    E_interrupt_Q_local_apic_P( 0x3e, ( E_interrupt_Q_local_apic_R( 0x3e ) & ~0xf ) | 0xb );
    E_interrupt_S_external[ E_interrupt_S_timer_gsi ] = &E_scheduler_I_clock_interrupt;
    //E_interrupt_Q_local_apic_P( 0x38, 1 );
    return 0;
}
/******************************************************************************/
